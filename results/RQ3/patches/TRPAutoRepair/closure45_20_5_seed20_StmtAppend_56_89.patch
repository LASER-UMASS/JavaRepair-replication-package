--- ./original/com/google/javascript/jscomp/RemoveUnusedVars.java	2018-02-15 22:07:35.000000000 -0500
+++ ./variant0/com/google/javascript/jscomp/RemoveUnusedVars.java	2018-02-15 22:32:16.000000000 -0500
@@ -215,7 +215,18 @@
           var = scope.getVar(maybeAssign.nameNode.getString());
           if (var != null) {
             assignsByVar.put(var, maybeAssign);
-            assignsByNode.put(maybeAssign.nameNode, maybeAssign);
+            {
+				assignsByNode.put(maybeAssign.nameNode, maybeAssign);
+				if (var != null) {
+					if (isRemovableVar(var)) {
+						if (!assignsByNode.containsKey(n)) {
+							markReferencedVar(var);
+						}
+					} else {
+						markReferencedVar(var);
+					}
+				}
+			}
 
             if (isRemovableVar(var) &&
                 !maybeAssign.mayHaveSecondarySideEffects) {
