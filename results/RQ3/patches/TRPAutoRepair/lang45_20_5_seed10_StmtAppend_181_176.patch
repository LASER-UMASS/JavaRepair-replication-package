--- ./original/org/apache/commons/lang/WordUtils.java	2018-02-03 01:19:58.000000000 -0500
+++ ./variant27/org/apache/commons/lang/WordUtils.java	2018-02-03 01:40:31.000000000 -0500
@@ -620,7 +620,12 @@
         }
         // if upper is less than lower, raise it to lower
         if (upper < lower) {
-            upper = lower;
+            {
+				upper = lower;
+				if (upper == -1 || upper > str.length()) {
+					upper = str.length();
+				}
+			}
         }
 
         StringBuffer result = new StringBuffer();
