eval_defects <- c("Chart1","Chart21","Chart25","Chart26","Chart5","Closure19","Closure21", "Closure22", "Closure86", "Lang10","Lang24","Lang33","Lang39","Lang43","Lang44","Lang45","Lang58","Lang59","Lang63","Lang7","Math18","Math24","Math28","Math29","Math40","Math49","Math5","Math50","Math53","Math73", "Math78", "Math8","Math80","Math81","Math85","Math95", "Time19")

gp_dev <- read.csv("gp_rq2_overall.csv")
trp_dev <- read.csv("trp_rq2_overall.csv")
par_dev <- read.csv("par_rq2_overall.csv")

gp_es <- read.csv("gp_rq5_overall.csv")
trp_es <- read.csv("trp_rq5_overall.csv")
par_es <- read.csv("par_rq5_overall.csv")

cat("##################\n")
cat("#defects patched by GenProg out of ",length(eval_defects)," defects using dev ts:", length(intersect(gp_dev$defect, eval_defects)) , "(",length(intersect(gp_dev$defect, eval_defects))/length(eval_defects), ")\n")
cat("#defects patched by Par out of ",length(eval_defects)," defects using dev ts:", length(intersect(par_dev$defect, eval_defects)) , "(",length(intersect(par_dev$defect, eval_defects))/length(eval_defects), ")\n")
cat("#defects patched by TRPAutoRepair out of ",length(eval_defects)," defects using dev ts:", length(intersect(trp_dev$defect, eval_defects)) , "(",length(intersect(trp_dev$defect, eval_defects))/length(eval_defects), ")\n")


cat("##################\n")
cat("#defects patched by GenProg out of ",length(eval_defects)," defects using es ts:", length(intersect(gp_es$defect, eval_defects)) , "(",length(intersect(gp_es$defect, eval_defects))/length(eval_defects), ")\n")
cat("#defects patched by Par out of ",length(eval_defects)," defects using es ts:", length(intersect(par_es$defect, eval_defects)) , "(",length(intersect(par_es$defect, eval_defects))/length(eval_defects), ")\n")
cat("#defects patched by TRPAutoRepair out of ",length(eval_defects)," defects using es ts:", length(intersect(trp_es$defect, eval_defects)) , "(",length(intersect(trp_es$defect, eval_defects))/length(eval_defects), ")\n")


cat("##################\n")
cat("#patches generated by GenProg in 740 attempts using dev ts:", nrow(subset(gp_dev, gp_dev$defect %in% intersect(gp_dev$defect, eval_defects))), "(", nrow(subset(gp_dev, gp_dev$defect %in% intersect(gp_dev$defect, eval_defects)))/740,  ")\n")
cat("#patches generated by Par in 740 attempts using dev ts:", nrow(subset(par_dev, par_dev$defect %in% intersect(par_dev$defect, eval_defects))), "(", nrow(subset(par_dev, par_dev$defect %in% intersect(par_dev$defect, eval_defects)))/740, ")\n")
cat("#patches generated by TrpAutoRepair in 740 attempts using dev ts:", nrow(subset(trp_dev, trp_dev$defect %in% intersect(trp_dev$defect, eval_defects))), "(", nrow(subset(trp_dev, trp_dev$defect %in% intersect(trp_dev$defect, eval_defects)))/740, ")\n")


cat("##################\n")
cat("#patches generated by GenProg in 740 attempts using es ts:", nrow(subset(gp_es, gp_es$defect %in% intersect(gp_es$defect, eval_defects))), "(", nrow(subset(gp_es, gp_es$defect %in% intersect(gp_es$defect, eval_defects)))/740,  ")\n")
cat("#patches generated by Par in 740 attempts using es ts:", nrow(subset(par_es, par_es$defect %in% intersect(par_es$defect, eval_defects))), "(",  nrow(subset(par_es, par_es$defect %in% intersect(par_es$defect, eval_defects)))/740, ")\n")
cat("#patches generated by TrpAutoRepair in 740 attempts using es ts:", nrow(subset(trp_es, trp_es$defect %in% intersect(trp_es$defect, eval_defects))), "(", nrow(subset(trp_es, trp_es$defect %in% intersect(trp_es$defect, eval_defects)))/740, ")\n")


# below analysis considers the defects patched using both kinds (developer and EvoSuite) of test suites  
dev_patched <- subset(gp_dev, gp_dev$defect %in% intersect(gp_dev$defect, gp_es$defect))
es_patched <- subset(gp_es, gp_es$defect %in% intersect(gp_dev$defect, gp_es$defect))
cat("## GenProg patch quality ################\n")
cat("## Developer (min, mean, median, max, 100%) ################\n")
cat(min(dev_patched$passpercentage), "\n")
cat(mean(dev_patched$passpercentage), "\n")
cat(median(dev_patched$passpercentage), "\n")
cat(max(dev_patched$passpercentage), "\n")
cat(length(which(dev_patched$passpercentage==100))/length(dev_patched$passpercentage)*100,"\n")
cat("## EvoSuite (min, mean, median, max, 100%) ################\n")
cat(min(es_patched$passpercentage), "\n")
cat(mean(es_patched$passpercentage), "\n")
cat(median(es_patched$passpercentage), "\n")
cat(max(es_patched$passpercentage), "\n")
cat(length(which(es_patched$passpercentage==100))/length(es_patched$passpercentage)*100,"\n")


dev_patched <- subset(par_dev, par_dev$defect %in% intersect(par_dev$defect, par_es$defect))
es_patched <- subset(par_es, par_es$defect %in% intersect(par_dev$defect, par_es$defect))
cat("## Par patch quality ################\n")
cat("## Developer (min, mean, median, max) ################\n")
cat(min(dev_patched$passpercentage), "\n")
cat(mean(dev_patched$passpercentage), "\n")
cat(median(dev_patched$passpercentage), "\n")
cat(max(dev_patched$passpercentage), "\n")
cat(length(which(dev_patched$passpercentage==100))/length(dev_patched$passpercentage)*100,"\n")
cat("## EvoSuite (min, mean, median, max) ################\n")
cat(min(es_patched$passpercentage), "\n")
cat(mean(es_patched$passpercentage), "\n")
cat(median(es_patched$passpercentage), "\n")
cat(max(es_patched$passpercentage), "\n")
cat(length(which(es_patched$passpercentage==100))/length(es_patched$passpercentage)*100,"\n")

dev_patched <- subset(trp_dev, trp_dev$defect %in% intersect(trp_dev$defect, trp_es$defect))
es_patched <- subset(trp_es, trp_es$defect %in% intersect(trp_dev$defect, trp_es$defect))
cat("## TRPAutoRepair patch quality ################\n")
cat("## Developer (min, mean, median, max) ################\n")
cat(min(dev_patched$passpercentage), "\n")
cat(mean(dev_patched$passpercentage), "\n")
cat(median(dev_patched$passpercentage), "\n")
cat(max(dev_patched$passpercentage), "\n")
cat(length(which(dev_patched$passpercentage==100))/length(dev_patched$passpercentage)*100,"\n")
cat("## EvoSuite (min, mean, median, max) ################\n")
cat(min(es_patched$passpercentage), "\n")
cat(mean(es_patched$passpercentage), "\n")
cat(median(es_patched$passpercentage), "\n")
cat(max(es_patched$passpercentage), "\n")
cat(length(which(es_patched$passpercentage==100))/length(es_patched$passpercentage)*100,"\n")
